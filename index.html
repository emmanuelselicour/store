<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>EDS Mini Boutique</title>
  <link rel="icon" type="image/jpeg" href="https://files.catbox.moe/rusj7l.jpg">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f0f2f5; }
    header { background: #2c3e50; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
    header h2 { margin: 0; }
    nav a { color: white; text-decoration: none; margin: 0 10px; }
    .container { max-width: 1200px; margin: 20px auto; display: grid; grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); gap: 15px; }
    .product { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 3px 6px rgba(0,0,0,0.1); text-align: center; word-wrap: break-word; }
    .product a { text-decoration: none; color: #2c3e50; font-weight: bold; display: block; margin-bottom: 5px; }
    .product p { margin: 5px 0; font-weight: bold; }
    button { padding: 8px 12px; border: none; border-radius: 5px; background: #2c3e50; color: white; cursor: pointer; }
    button:hover { background: #34495e; }

    /* Panier flottant */
    #cartToggle { position: fixed; top: 20px; right: 20px; background: #2c3e50; color: white; padding: 10px 15px; border-radius: 5px; cursor: pointer; z-index: 1000; }
    #cartPanel { position: fixed; top: 60px; right: 20px; width: 320px; background: white; border-radius: 10px; box-shadow: 0 3px 6px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto; transform: translateX(110%); transition: transform 0.3s ease-in-out; z-index: 999; }
    #cartPanel.open { transform: translateX(0); }
    #cartPanel h3 { margin: 10px; }
    .cart-item { display: flex; justify-content: space-between; margin: 10px; }
    .cart-item button { background: red; padding: 2px 6px; font-size: 12px; }
    form { display: flex; flex-direction: column; margin: 10px; }
    form input, form select { margin-bottom: 10px; padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
    form button { background: green; margin-top: 5px; }
  </style>
</head>
<body>

<header>
  <h2>EDS Mini Boutique</h2>
  <nav>
    <a href="#">Accueil</a>
    <a href="#">Produits</a>
  </nav>
  <div id="cartToggle">Panier (<span id="cartCount">0</span>)</div>
</header>

<div class="container" id="products"></div>

<div id="cartPanel">
  <h3>Panier</h3>
  <div id="cartItems"></div>
  <p>Total : $<span id="total">0</span></p>
  <button onclick="clearCart()">Vider le panier</button>

  <form name="commande" method="POST" data-netlify="true" action="/merci.html">
    <input type="hidden" name="form-name" value="commande">
    <input type="text" name="nom" placeholder="Nom" required>
    <input type="text" name="prenom" placeholder="Prénom" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="tel" name="numero" placeholder="Numéro de téléphone" required>
    <input type="text" name="adresse" placeholder="Adresse de livraison" required>
    <select name="paiement" required>
      <option value="">Méthode de paiement</option>
      <option value="NatCash">NatCash</option>
      <option value="MonCash">MonCash</option>
    </select>
    <input type="text" name="idpaiement" placeholder="ID de paiement" required>
    <input type="hidden" name="produit" id="produitCommande">
    <input type="hidden" name="prix" id="prixCommande">
    <button type="submit">Commander</button>
  </form>
</div>

<footer>
  <p>© 2025 EDS Mini Boutique</p>
</footer>

<script>
const products=[
  {id:1, nom:"Robe Fleurie", prix:25},{id:2, nom:"Top Noir", prix:15},{id:3, nom:"Jean Slim", prix:30},{id:4, nom:"T-shirt Blanc", prix:10},
  {id:5, nom:"Chaussures Sport", prix:40},{id:6, nom:"Sac à Main", prix:35},{id:7, nom:"Montre Classique", prix:50},{id:8, nom:"Jupe Plissée", prix:22},
  {id:9, nom:"Pull Hiver", prix:28},{id:10, nom:"Bottes", prix:45},{id:11, nom:"Casquette", prix:12},{id:12, nom:"Écharpe", prix:18},
  {id:13, nom:"Veste", prix:38},{id:14, nom:"Short Été", prix:20},{id:15, nom:"Sandales", prix:25},{id:16, nom:"Chemise Homme", prix:27},
  {id:17, nom:"Pull Homme", prix:30},{id:18, nom:"Robe Soirée", prix:50},{id:19, nom:"Jean Femme", prix:35},{id:20, nom:"Sac de Sport", prix:40}
];

let cart=[];

const container=document.getElementById("products");
const cartItems=document.getElementById("cartItems");
const totalEl=document.getElementById("total");
const cartCount=document.getElementById("cartCount");
const cartPanel=document.getElementById("cartPanel");
const cartToggle=document.getElementById("cartToggle");

function renderProducts(){
  container.innerHTML="";
  products.forEach(p=>{
    const div=document.createElement("div");
    div.className="product";
    div.innerHTML=`
      <a href="#">${p.nom}</a>
      <p>$${p.prix}</p>
      <button onclick="addToCart(${p.id})">Ajouter au panier</button>
    `;
    container.appendChild(div);
  });
}

function renderCart(){
  cartItems.innerHTML="";
  let total=0;
  cart.forEach((item,index)=>{
    total+=item.prix;
    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`
      <span>${item.nom} ($${item.prix})</span>
      <button onclick="removeFromCart(${index})">X</button>
    `;
    cartItems.appendChild(div);
  });
  totalEl.textContent=total;
  cartCount.textContent=cart.length;

  document.getElementById("produitCommande").value=cart.map(i=>i.nom).join(", ");
  document.getElementById("prixCommande").value=cart.map(i=>i.prix).join(", ");
}

function addToCart(id){
  const product=products.find(p=>p.id===id);
  cart.push(product);
  renderCart();
}

function removeFromCart(index){
  cart.splice(index,1);
  renderCart();
}

function clearCart(){
  cart=[];
  renderCart();
}

cartToggle.addEventListener("click", ()=>{
  cartPanel.classList.toggle("open");
});

// Fermer le panier quand on clique en dehors
document.addEventListener("click", (e)=>{
  if(!cartPanel.contains(e.target) && !cartToggle.contains(e.target)){
    cartPanel.classList.remove("open");
  }
});

renderProducts();
renderCart();
</script>

</body>
</html>
